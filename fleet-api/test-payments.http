### Test Payment Tracking Endpoints

### 1. Test /payments webhook (record payment)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments CONTRACT001 5000 Monthly service payment

###

### 2. Test /payments webhook (view monthly payments)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+14155238886&Body=/payments

###

### 3. Test /payments webhook (record payment with summary)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+14155238886&Body=/payments CONTRACT002 2500 Equipment maintenance /summary

###

### 4. Test /receivable webhook (record receivable)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+14155238886&Body=/receivable CONTRACT003 3000 Outstanding invoice payment

###

### 5. Test /receivable webhook (view monthly receivables)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/receivable

###

### 6. Test /received webhook (record received payment)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
} CONTRACT004 1500 Partial payment received

###

### 7. Test /received webhook (view monthly received payments)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
}

###

### 8. Test /help command
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/help

###

### 9. Test invalid payment format
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments invalid format

###

### 10. Test invalid receivable format
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/receivable invalid format

###

### 11. Test invalid received format
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
} invalid format

###

### 12. Test monthly expenses (for comparison)
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/monthly

###

### 13. Test direct payments endpoint (if using external webhook)
POST http://localhost:5000/api/twilio-whatsapp/payments
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments CONTRACT005 7500 Direct payment test

###

### 14. Test multiple payments in sequence
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments CONTRACT006 1000 First payment

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments CONTRACT007 2000 Second payment

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments

###

### 15. Test receivables and received payments in sequence
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/receivable CONTRACT008 5000 Invoice for services

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
} CONTRACT008 5000 Payment received for services

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/receivable

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
}

###

### 16. Test with different WhatsApp numbers
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+9876543210&Body=/payments CONTRACT009 3000 Different user payment

###

### 17. Test edge cases
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments CONTRACT010 0.01 Small amount test

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments CONTRACT011 999999.99 Large amount test

###

### 18. Test empty body
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=

###

### 19. Test unknown command
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/unknown command

###

### 20. Test complete workflow
POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/receivable CONTRACT012 10000 New project invoice

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
} CONTRACT012 5000 Partial payment received

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
} CONTRACT012 5000 Final payment received

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/payments

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/receivable

###

POST http://localhost:5000/api/twilio-whatsapp/webhook
Content-Type: application/x-www-form-urlencoded

From=whatsapp:+1234567890&Body=/received

###

### 21. Test payment tracking with JSON response (shows actual messages)
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT001 5000 Monthly service payment"
}

###

### 22. Test monthly payments view with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments"
}

###

### 23. Test receivable with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/receivable CONTRACT002 3000 Outstanding invoice"
}

###

### 24. Test help command with JSON response
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/help"
}

###

### 25. Test invoice details command
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/invoice INV-001"
}

###

### 26. Test payment with invoice number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments INV-001 5000 Monthly service payment"
}

###

### 27. Test payment with contract number
POST http://localhost:5000/api/twilio-whatsapp/test-payments
Content-Type: application/json

{
  "whatsappNumber": "whatsapp:+14155238886",
  "command": "/payments CONTRACT-001 2500 Equipment maintenance"
}
